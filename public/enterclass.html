<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EnterClass</title>
    <link rel="stylesheet" href="index.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
     /* Mesaj (message) stilini güzelleştirme */
#message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5rem;
    font-weight: bold;
    text-align: center;
    color: #fff; /* Beyaz metin rengi */
    padding: 15px 30px;
    background-color: #f44336; /* Kırmızı arka plan rengi */
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Hafif gölge efekti */
    display: none; /* Başlangıçta gizli */
    animation: fadeIn 0.5s ease-in-out;
}

/* Animasyon: Fade-in */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Mesajın başarılı olduğunda yeşil olmasını sağlamak */
#message.success {
    background-color: #4CAF50; /* Yeşil arka plan rengi */
    color: white; /* Beyaz metin rengi */
}

/* Mesajın hatalı olduğunda kırmızı olmasını sağlamak */
#message.error {
    background-color: #f44336; /* Kırmızı arka plan rengi */
    color: white; /* Beyaz metin rengi */
}

/* Mesajı daha belirgin hale getirme */
#message.show {
    display: block;
    animation: slideIn 0.1s ease-in-out;
}

/* Slide-in animasyonu */
@keyframes slideIn {
    from {
        transform: translate(-50%, -50%) translateY(20px);
        opacity: 0;
    }
    to {
        transform: translate(-50%, -50%) translateY(0);
        opacity: 1;
    }
}

    </style>
</head>
<body>
    <header class="header">
        <a href="home.html" class="logo">
        <span>Attendify</span></a>

        <i class='bx bx-menu' id="menu-icon"></i>

        <nav class="navbar">
            <a href="./home.html">Home</a>
            <a href="./Loginpage.html" > Log in</a>
            <a href="./SignUp.html" > Sign Up</a>
            <a href="./profile.html">Profile</a>
            <a href="./contactUs.html">Contact Us</a>
        </nav>
    </header>

    <section class="logpage" id="logpage">
        <div class="LogPage">
            <form id="loginForm">
                <div class="formgroup">
                    <label for="student id">Student ID</label>
                    <input type="text" id="student id" name="student id" required>
                </div>
                <div class="formgroup">
                    <label for="passkey">Passkey</label>
                    <input type="text" id="passkey" name="passkey" required>
                </div>

                <label for="courseCode"></label>
                <select id="courseCode" name="courseCode" required>
                <option value="" disabled selected>Select Course</option>
                <option value="209">SENG209</option>
                <option value="211">SENG211</option>
                </select>

                <div class="btngroup">
                    <button type="submit">Attend</button>
                </div>
            </form>
        </div>
        <p id="message"></p>
    </section>

    <footer class="footer">
        <div class="social">
            <a href="https://www.instagram.com/attendifyweb"><i class='bx bxl-instagram' ></i></a>
            <a href="http://linkedin.com/in/attendify-web-a1458b342"><i class='bx bxl-linkedin-square' ></i></a>
                <a href="http://www.youtube.com/@AttendifyWeb"><i class='bx bxl-youtube' ></i></a> 
        </div>

        <ul class="list">
            <li>
                <a href="home.html">Home</a>
            </li>
            <li>
                <a href="SignUp.html">Sign Up</a>
            </li>
            <li>
                <a href="Loginpage.html">Log In</a>
            </li>
            <li>
                <a href="profile.html">Profile</a>
            </li>
            <li>
                <a href="contactUs.html">Contact Us/a>
            </li>
        </ul>
        <p class="copyright">
            @ Attendify | All Rights Reserved
        </p>
    </footer>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // Sayfa yenilenmesini engelle

            const studentId = document.getElementById('studentId').value;
            const passkey = document.getElementById('passkey').value;
            const courseCode = document.getElementById('courseCode').value;
            const message = document.getElementById('message');

            // Mesajın başlangıçta gizlenmesini sağla
            message.style.display = 'none';

            try {
                const response = await fetch('https://peaceful-forest-90255-fbe04ed90482.herokuapp.com/api/control/enterclass', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ studentId, passkey, courseCode }),
                });

                const data = await response.json();

                if (data.success) {
            //message.style.color = 'green';
            //message.textContent = 'Attendance recorded successfully!';
            //message.style.display = 'block'; // Mesajı göster

            // Başarılı giriş sonrası yönlendirme
            window.location.href = 'dersekatildiniz.html'; // Derse katıldınız sayfasına yönlendir
             } else {
            message.style.color = 'white';
            message.textContent = 'Wrong student ID or passkey.'; // Hata mesajı
            message.style.display = 'block'; // Mesajı göster
            }
        } catch (error) {
           message.style.color = 'white';
           message.textContent = 'An error occurred. Please try again.';
         message.style.display = 'block'; // Mesajı göster
        }
        });
    </script>
    

       <script src="home.js"></script>
</body>
</html>
